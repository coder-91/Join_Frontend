<div class="cont-lvl-1">
  <div class="cont-lvl-2-1">
    <img src="/assets/images/logo_light.svg" alt="Join Logo">
    <h1>{{contact? 'Edit contact': 'Add contact'}}</h1>
    @if (!contact) {
      <div class="sub-text">Tasks are better with a team!</div>
    }
    <div class="divider"></div>
  </div>

  <div class="cont-lvl-2-2">

    <div class="avatar" [ngStyle]="{'background-color': contact ? contact.avatarColor:'#aaa'}">
      @if (contact) {
          <div>{{ getInitials(contact.name) }}</div>
      }
      @else {
        <mat-icon>person_outline</mat-icon>
      }

    </div>

    <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form">
      <mat-form-field>
        <mat-label>Name</mat-label>
        <input matInput formControlName="name" type="text">
        <mat-icon color="primary" matSuffix>person</mat-icon>
        @if (contactForm.get('name')?.touched) {
          <mat-error>
            @switch (true) {
              @case (contactForm.get('name')?.hasError('required'))
              { Name is required }
              @case (contactForm.get('name')?.hasError('minlength'))
              { Name must be at least 2 characters in length }
            }
          </mat-error>
        }
      </mat-form-field>

      <mat-form-field>
        <mat-label>Email</mat-label>
        <input matInput type="email" formControlName="email" placeholder="Ex. pat@example.com">
        <mat-icon color="primary" matSuffix>email</mat-icon>
        @if (contactForm.get('email')?.touched) {
          <mat-error>
            @switch (true) {
              @case (contactForm.get('email')?.hasError('required'))
              { Email is required }
              @case (contactForm.get('email')?.hasError('email'))
              { Please enter a valid email }
            }
          </mat-error>
        }
      </mat-form-field>

      <mat-form-field>
        <mat-label>Phone</mat-label>
        <input matInput formControlName="phoneNumber" type="tel">
        <mat-icon color="primary" matSuffix>phone</mat-icon>
        @if (contactForm.get('phoneNumber')?.touched) {
          <mat-error>
            @switch (true) {
              @case (contactForm.get('phoneNumber')?.hasError('required'))
              { Phone number is required }
            }
          </mat-error>
        }
      </mat-form-field>

      <div class="button-box">
        <button mat-raised-button color="primary" type="submit" [disabled]="!contactForm.valid">
          <span>{{contact? 'Save': 'Create'}}</span>
        </button>

        <button mat-raised-button type="button" (click)="onCancel()">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>


